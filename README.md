# lk-platform
Provisioning and automation for servers and desktops

## Configuration
Settings are loaded in the following order (later values override earlier ones):
1. `$LK_BASE/etc/lk-platform/lk-platform.conf`
2. `~/.config/lk-platform/lk-platform.conf`
3. Environment variables

### Settings
- `LK_ACCEPT_OUTPUT_HOSTS`
- `LK_ADD_TO_PATH`
- `LK_ADD_TO_PATH_FIRST`
- `LK_ADMIN_EMAIL`
- `LK_APT_DEFAULT_MIRROR`
- `LK_APT_DEFAULT_SECURITY_MIRROR`
- `LK_ARCH_MIRROR`
- `LK_ARCH_REPOS`
- `LK_AUTO_BACKUP`
- `LK_AUTO_BACKUP_SCHEDULE`
- `LK_AUTO_REBOOT`
- `LK_AUTO_REBOOT_TIME`
- `LK_BACKUP_BASE_DIRS`
- `LK_BACKUP_MAIL`
- `LK_BACKUP_MAIL_ERROR_ONLY`
- `LK_BACKUP_MAIL_FROM`
- `LK_BACKUP_ROOT`
- `LK_BACKUP_TIMESTAMP`
- `LK_BIN_PATH`
- `LK_BRIDGE_INTERFACE`
- `LK_CERTBOT_OPTIONS`
- `LK_CERTBOT_PLUGIN`
- `LK_CLIP_LINES`
- `LK_COMPLETION`
- `LK_CURL_OPTIONS`
- `LK_DEFAULTS_DIR`
- `LK_DIG_OPTIONS`
- `LK_DIG_SERVER`
- `LK_DIM`
- `LK_DIM_AFTER`
- `LK_DIM_TIME`
- `LK_DRY_RUN`
- `LK_EMAIL_BLACKHOLE`
- `LK_FILE_BACKUP_MOVE`
- `LK_FILE_BACKUP_TAKE`
- `LK_FILE_NO_DIFF`
- `LK_FORCE_INPUT`
- `LK_GIT_ENV`
- `LK_GIT_REF`
- `LK_GIT_REPOS`
- `LK_GIT_USER`
- `LK_GRUB_CMDLINE`
- `LK_INNODB_BUFFER_SIZE`
- `LK_IPTABLES_46`
- `LK_IPV4_ADDRESS`
- `LK_IPV4_DNS_SEARCH`
- `LK_IPV4_DNS_SERVER`
- `LK_IPV4_GATEWAY`
- `LK_IP_KEEP_PREFIX`
- `LK_IP_PUBLIC_ONLY`
- `LK_KEEP_TRYING_MAX`
- `LK_LETSENCRYPT_EMAIL`
- `LK_LETSENCRYPT_IGNORE_DNS`
- `LK_LINODE_SKIP_REGEX`
- `LK_LINODE_SSH_KEYS`
- `LK_LINODE_SSH_KEYS_FILE`
- `LK_LOG_BASENAME`
- `LK_MAIL_FROM`
- `LK_MEDIAINFO_FORMAT`
- `LK_MEDIAINFO_LABEL`
- `LK_MEDIAINFO_NO_VALUE`
- `LK_MEMCACHED_MEMORY_LIMIT`
- `LK_MYSQL_COMMAND`
- `LK_MYSQL_ELEVATE`
- `LK_MYSQL_ELEVATE_USER`
- `LK_MYSQL_HOST`
- `LK_MY_CNF`
- `LK_MY_CNF_OPTIONS`
- `LK_NODE_FQDN`
- `LK_NODE_HOSTNAME`
- `LK_NODE_LANGUAGE`
- `LK_NODE_LOCALES`
- `LK_NODE_PACKAGES`
- `LK_NODE_SERVICES`
- `LK_NODE_TIMEZONE`
- `LK_NO_INPUT`
- `LK_NO_LOG`
- `LK_NTP_SERVER`
- `LK_OPCACHE_MEMORY_CONSUMPTION`
- `LK_OPENCONNECT_PROTOCOL`
- `LK_OWASP_CRS_BRANCH`
- `LK_PACKAGES_FILE`
- `LK_PACMAN_SYNC`
- `LK_PATH_PREFIX`
- `LK_PHP_ADMIN_SETTINGS`
- `LK_PHP_SETTINGS`
- `LK_PLATFORM_BRANCH`
- `LK_PROMPT`
- `LK_PROMPT_DISPLAYED`
- `LK_PROMPT_LAST_COMMAND_CLEAN`
- `LK_RED`
- `LK_REJECT_OUTPUT`
- `LK_REQUIRED`
- `LK_SCRIPT_DEBUG`
- `LK_SECONDARY_LOG_FILE`
- `LK_SHUTDOWN_DELAY`
- `LK_SMTP_RELAY`
- `LK_SNAPSHOT_DAILY_MAX_AGE`
- `LK_SNAPSHOT_FAILED_MAX_AGE`
- `LK_SNAPSHOT_HOURLY_MAX_AGE`
- `LK_SNAPSHOT_WEEKLY_MAX_AGE`
- `LK_SSH_HOME`
- `LK_SSH_JUMP_HOST`
- `LK_SSH_JUMP_KEY`
- `LK_SSH_JUMP_USER`
- `LK_SSH_PREFIX`
- `LK_SSH_PRIORITY`
- `LK_SSH_TRUSTED_ONLY`
- `LK_SUDO`
- `LK_SYSTEM_GRAPHICS`
- `LK_TRUSTED_IP_ADDRESSES`
- `LK_TTY_NO_BREAK`
- `LK_TTY_NO_COLOUR`
- `LK_UPGRADE_EMAIL`
- `LK_VERBOSE`
- `LK_WP_FLUSH`
- `LK_WP_MODE_DIR`
- `LK_WP_MODE_FILE`
- `LK_WP_MODE_WRITABLE_DIR`
- `LK_WP_MODE_WRITABLE_FILE`
- `LK_WP_OLD_URL`
- `LK_WP_REAPPLY`
- `LK_WP_REPLACE`
- `LK_WP_REPLACE_WITHOUT_SCHEME`
- `LK_WP_SYNC_EXCLUDE`
- `LK_WP_SYNC_KEEP_LOCAL`

> To generate the list above:
>
> ```bash
> lk_bash_find_scripts -d "$LK_BASE" -print0 |
>     xargs -0 grep -Pho '((?<=\$\{)|(?<=lk_is_true )|(?<=lk_is_false ))LK_[a-zA-Z0-9_]+\b(?!(\[[^]]+\])?\})' |
>     sort -u |
>     sed -Ee '/^LK_(.+_(UPDATED|NO_CHANGE)|BASE|USAGE|VERSION|Z|ADMIN_USERS|HOST_.+|MYSQL_(USERNAME|PASSWORD)|SHUTDOWN_ACTION)$/d' -e 's/.*/- `&`/'
> ```
