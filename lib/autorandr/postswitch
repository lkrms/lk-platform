#!/bin/bash

set -euo pipefail

if [ -f "$AUTORANDR_PROFILE_FOLDER/dpi" ] &&
    DPI="$(cat "$AUTORANDR_PROFILE_FOLDER/dpi")" &&
    [[ "$DPI" =~ ^[0-9]+$ ]]; then

    xrandr --dpi "$DPI"

    case "${XDG_CURRENT_DESKTOP:-}" in
    XFCE)
        "$LK_BASE/bin/lk-xfce4-apply-dpi.sh" "$DPI"
        ;;&
    *)
        echo "Xft.dpi: $DPI" | xrdb -merge
        ;;
    esac
fi
